<script>
    if (!sessionStorage._browser_id) {
        sessionStorage._browser_id = crypto.randomUUID();
    }

    function checkSession() {
        fetch("/session-check/", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({browser_id: sessionStorage._browser_id})
        })
        .then(r => r.json())
        .then(data => {
            if (data.valid === false) {
                window.location.href = "/session-expired/";
            }
        });
    }

    setInterval(checkSession, 3000);
</script>
